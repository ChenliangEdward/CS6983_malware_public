import requests

def test_download_api(url, filename):
    # Send POST request to the API with filename in the request data
    response = requests.post(url, data=filename)

    # Check if the response is OK
    if response.ok:
        # Assuming the file is small and can be handled in memory
        with open(filename, 'wb') as file:
            file.write(response.content)
        print(f"File {filename} downloaded successfully.")
    else:
        print(f"Failed to download file. Status code: {response.status_code}, Message: {response.text}")

if __name__ == "__main__":
    # URL of the Flask API endpoint
    api_url = 'http://localhost:5000/downloads'
    # Filename to request for download
    test_filename = 'example.txt'  # Adjust this to a file you know exists on the server
    
    # Call the function with the API URL and the test filename
    test_download_api(api_url, test_filename)