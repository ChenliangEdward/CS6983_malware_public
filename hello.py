from flask import Flask, send_file
import hashlib
import os

app = Flask(__name__)

def generate_random_sha256():
    # Generate 32 bytes (256 bits) of random data
    random_bytes = os.urandom(32)
    
    # Create a sha256 hash object
    sha256_hash = hashlib.sha256()
    
    # Update the hash object with the random bytes
    sha256_hash.update(random_bytes)
    
    # Return the hexadecimal representation of the digest
    return sha256_hash.hexdigest()


def append_string_to_file(file_path, string_to_append):
    # Open the file in append mode
    with open(file_path, 'a') as file:
        # Write the string to the end of the file
        file.write(string_to_append)

@app.route("/")
def hello_world():
    return "<p>Waht up nerd</p>"

# TODO: Make the directory Completely random
@app.route('/INSIDIOUS_DOWNLOAD')
def download_file():
    path_to_file = "test_dll/INSIDIOUS.dll"
    try:
        return send_file(path_to_file, as_attachment=True)
    except Exception as e:
        return str(e)
    

app.run(host='0.0.0.0', port=8000)
